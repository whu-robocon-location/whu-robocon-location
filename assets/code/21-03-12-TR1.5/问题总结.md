# 定位问题一览表

由于原理及实验标准不清晰、流程中间差步骤，导致定位过程中出现各种问题，为防止重复踩坑，浪费时间，现总结如下：

## 直线标定

### 找不到可用距离

**原因**： 

1. 导轨本身不直
2. 陀螺仪精度不够，导致输出角度不稳定
3. 导轨积灰、场地有杂物等环境因素

**解决方案**

按照定位流程来即可

### 直线标定结果出问题

**原因**

1. 记录数据出错，如x-和x+数据记反了；
2. 表格中的$ \beta $ 没有按照实际情况加减Pi。注意，表格的公式不可能出问题，之前把出问题的地方都改过了；
3. 代码未注释圆弧更新部分
4. 直线标定的参数没有改

**解决方案**

参见process

### 标定时码盘反接

**原因**

1. 如题

**解决方案**

1. 找到Encoder和TIM-CNT的对应关系，别忘记正负号，解算出本应该正确的系数；
2. 反接码盘。
3. 此方法不到万不得已不建议用，或许可以解算出左手系与右手系的对应关系。



## 圆弧更新

### 圆弧更新matlab程序不收敛

**原因**

1. 原始数据出错；
2. 程序代码参数出错。需要改的参数在程序里都有说明；
3. 迭代条件不恰当，如最大值最小值选取，积分步长的选取。

**解决方案**

1. 对照原因，显而易见



### Matlab窗口自定义

主页-布局-默认



## 其他

### keil数据读取不正确、掉线、自动清零

**原因**

1. jlink和keil的版本不兼容
2. watch栏更新不及时
3. 代码问题

**解决办法**

1. keil的安装教程

---

- [keil5.25破解版](http://www.lxc666.cn/views/Software/step.html#win%E8%BD%AF%E4%BB%B6%E7%9B%AE%E5%BD%95)
- [keil官网下载](https://www.keil.com/)，用keil5.20~keil5.25，版本太高的keil不兼容低版本的盗版j-link。下载之后也可以在软件的help栏查看版本。
- [STM32F4固件包下载](https://www.keil.com/dd2/Pack/?tdsourcetag=s_pcqq_aiomsg#/eula-container)，用[迅雷下载](https://dl.xunlei.com/)快很多

---

2. keil的watch栏更新比较慢，变量更新不一定同步。调试最好打断点看；
3. 在代码逻辑正确的情况下，注意保存->编译->debug，必须编译。否则调试时还是保存前的代码逻辑。



### 注意事项

1. 导轨安装

```
导轨因为热胀冷缩等环境因素，重装过几次来保证其精度。
将滑块滑到中间，两个人持两端将导轨缓缓放下，对正，打胶，装钉子，校验。流程写在这并不是教如何装导轨，只是说明导轨直线度容易受环境影响，重装又复杂，所以日常需要做好导轨维护工作。
```

2. 小车安装

```markdown
 * 把小车安上导轨需要原装钉，除非原装钉长度不够。替换的钉子型号要一致。
 * 现在采用夹爪固定小车，即小车与滑块之间依靠树脂板、铝管和钉子连接。不要沿导轨垂直方向晃动车，这会导致树脂板弯曲造成间隙，从而影响标定精度。
```





